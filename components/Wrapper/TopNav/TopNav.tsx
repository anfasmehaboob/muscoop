/* eslint-disable react/no-unescaped-entities */
import React, { useEffect, useRef, useState } from "react";
import styles from "./TopNav.module.scss";
import {
  Menu,
  MenuItem,
  MenuButton,
  SubMenu,
  ControlledMenu,
} from "@szhsin/react-menu";

interface Props {
  setOpen: (status: boolean) => void;
  open: boolean;
}

const TopNav = ({ setOpen, open }: Props) => {
  const ref = useRef<any>();
  const [openMenu, setOpenMenu] = useState(false);
  const [phone, setPhone] = useState<number | string>("");
  useEffect(() => {
    if (phone != "") {
      setOpenMenu(true);
    } else {
      setOpenMenu(false);
    }
  }, [phone]);

  useEffect(() => {
    document.addEventListener("click", handleClick);
    return () => document.removeEventListener("click", handleClick);
    function handleClick(e: any) {
      if (ref && ref.current) {
        const el: any = ref.current;
        if (!el.contains(e.target)) {
          setOpenMenu(false);
        }
      }
    }
  }, []);
  return (
    <div className={styles.topNav}>
      <div className={styles.parent}>
          <div className={styles.mobileMenuBtn}>
            <svg
              onClick={() => setOpen(!open)}
              xmlns="http://www.w3.org/2000/svg"
              className="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              strokeWidth={2}
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M4 6h16M4 12h8m-8 6h16"
              />
            </svg>
          </div>
        <div className={styles.left}>

          <div className={styles.navSearchUser}>
            <div
              data-menu={openMenu == true ? "open" : "closed"}
              className={styles.serachBox}
              ref={ref}
            >
              <input
                value={phone}
                onChange={(e) => {
                  setPhone(e.target.value);
                }}
                type="text"
                placeholder="Search Customer"
              />
            </div>
            {phone !== "" && openMenu && (
              <div className={styles.searchUserSuggestion}>
                <div data-count={"2"} className={styles.listBox}>
                  <div className={styles.userItem}>
                    <div className={styles.left}>
                      <h5>Junaid</h5>
                      <h6>9656609275</h6>
                    </div>
                    <div className={styles.right}>
                      <svg
                        width="24"
                        height="25"
                        viewBox="0 0 24 25"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fillRule="evenodd"
                          clipRule="evenodd"
                          d="M5.5 8.41828C5.5 6.02317 7.40279 4.08154 9.75 4.08154C12.0972 4.08154 14 6.02317 14 8.41828C14 10.8134 12.0972 12.755 9.75 12.755C7.40279 12.755 5.5 10.8134 5.5 8.41828ZM9.75 5.61216C8.23122 5.61216 7 6.8685 7 8.41828C7 9.96806 8.23122 11.2244 9.75 11.2244C11.2688 11.2244 12.5 9.96806 12.5 8.41828C12.5 6.8685 11.2688 5.61216 9.75 5.61216Z"
                          fill="#363352"
                        />
                        <path
                          fillRule="evenodd"
                          clipRule="evenodd"
                          d="M2 18.1122C2 15.9988 3.67893 14.2856 5.75 14.2856H6.09087C6.27536 14.2856 6.45869 14.3154 6.63407 14.3738L7.49959 14.6622C8.96187 15.1494 10.5381 15.1494 12.0004 14.6622L12.8659 14.3738C13.0413 14.3154 13.2246 14.2856 13.4091 14.2856H13.75C15.8211 14.2856 17.5 15.9988 17.5 18.1122V19.3247C17.5 20.0933 16.9541 20.7486 16.2107 20.8725C11.9319 21.5853 7.5681 21.5853 3.28927 20.8725C2.54588 20.7486 2 20.0933 2 19.3247V18.1122ZM5.75 15.8162C4.50736 15.8162 3.5 16.8442 3.5 18.1122V19.3247C3.5 19.3432 3.51311 19.3589 3.53097 19.3619C7.64972 20.048 11.8503 20.048 15.969 19.3619C15.9869 19.3589 16 19.3432 16 19.3247V18.1122C16 16.8442 14.9926 15.8162 13.75 15.8162H13.4091C13.3828 15.8162 13.3566 15.8205 13.3315 15.8288L12.466 16.1172C10.7012 16.7053 8.79881 16.7053 7.03398 16.1172L6.16847 15.8288C6.14342 15.8205 6.11722 15.8162 6.09087 15.8162H5.75Z"
                          fill="#363352"
                        />
                        <path
                          d="M18.25 7.14277C18.6642 7.14277 19 7.48541 19 7.90807V9.69379H20.75C21.1642 9.69379 21.5 10.0364 21.5 10.4591C21.5 10.8818 21.1642 11.2244 20.75 11.2244H19V13.0101C19 13.4328 18.6642 13.7754 18.25 13.7754C17.8358 13.7754 17.5 13.4328 17.5 13.0101V11.2244H15.75C15.3358 11.2244 15 10.8818 15 10.4591C15 10.0364 15.3358 9.69379 15.75 9.69379H17.5V7.90807C17.5 7.48541 17.8358 7.14277 18.25 7.14277Z"
                          fill="#363352"
                        />
                      </svg>
                    </div>
                  </div>
                  <div className={styles.userItem}>
                    <div className={styles.left}>
                      <h5>Junaid</h5>
                      <h6>9656609275</h6>
                    </div>
                    <div className={styles.right}>
                      <svg
                        width="24"
                        height="25"
                        viewBox="0 0 24 25"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fillRule="evenodd"
                          clipRule="evenodd"
                          d="M5.5 8.41828C5.5 6.02317 7.40279 4.08154 9.75 4.08154C12.0972 4.08154 14 6.02317 14 8.41828C14 10.8134 12.0972 12.755 9.75 12.755C7.40279 12.755 5.5 10.8134 5.5 8.41828ZM9.75 5.61216C8.23122 5.61216 7 6.8685 7 8.41828C7 9.96806 8.23122 11.2244 9.75 11.2244C11.2688 11.2244 12.5 9.96806 12.5 8.41828C12.5 6.8685 11.2688 5.61216 9.75 5.61216Z"
                          fill="#363352"
                        />
                        <path
                          fillRule="evenodd"
                          clipRule="evenodd"
                          d="M2 18.1122C2 15.9988 3.67893 14.2856 5.75 14.2856H6.09087C6.27536 14.2856 6.45869 14.3154 6.63407 14.3738L7.49959 14.6622C8.96187 15.1494 10.5381 15.1494 12.0004 14.6622L12.8659 14.3738C13.0413 14.3154 13.2246 14.2856 13.4091 14.2856H13.75C15.8211 14.2856 17.5 15.9988 17.5 18.1122V19.3247C17.5 20.0933 16.9541 20.7486 16.2107 20.8725C11.9319 21.5853 7.5681 21.5853 3.28927 20.8725C2.54588 20.7486 2 20.0933 2 19.3247V18.1122ZM5.75 15.8162C4.50736 15.8162 3.5 16.8442 3.5 18.1122V19.3247C3.5 19.3432 3.51311 19.3589 3.53097 19.3619C7.64972 20.048 11.8503 20.048 15.969 19.3619C15.9869 19.3589 16 19.3432 16 19.3247V18.1122C16 16.8442 14.9926 15.8162 13.75 15.8162H13.4091C13.3828 15.8162 13.3566 15.8205 13.3315 15.8288L12.466 16.1172C10.7012 16.7053 8.79881 16.7053 7.03398 16.1172L6.16847 15.8288C6.14342 15.8205 6.11722 15.8162 6.09087 15.8162H5.75Z"
                          fill="#363352"
                        />
                        <path
                          d="M18.25 7.14277C18.6642 7.14277 19 7.48541 19 7.90807V9.69379H20.75C21.1642 9.69379 21.5 10.0364 21.5 10.4591C21.5 10.8818 21.1642 11.2244 20.75 11.2244H19V13.0101C19 13.4328 18.6642 13.7754 18.25 13.7754C17.8358 13.7754 17.5 13.4328 17.5 13.0101V11.2244H15.75C15.3358 11.2244 15 10.8818 15 10.4591C15 10.0364 15.3358 9.69379 15.75 9.69379H17.5V7.90807C17.5 7.48541 17.8358 7.14277 18.25 7.14277Z"
                          fill="#363352"
                        />
                      </svg>
                    </div>
                  </div>
                </div>
                <div className={styles.footer}>
                  <h5>Search By</h5>
                  <img src="/asset/elastic_logo.png" alt="elastic" />
                </div>
              </div>
            )}
          </div>
        </div>
        <div className={styles.nav}>
          {/* <div className={styles.navInviteUser}>
            <h5>Invite customer</h5>
            <div className={styles.icon}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M7.25042 15.0507C7.24214 15.3948 7.46916 15.7004 7.801 15.7918C8.13284 15.8832 8.48432 15.737 8.65343 15.4372L9.55574 13.8377C10.6258 11.9407 12.756 10.9015 14.9097 11.2256L15.059 11.2481C15.0859 11.9259 15.124 12.6035 15.1733 13.2804L15.2412 14.211C15.2963 14.9678 16.1402 15.3909 16.7796 14.9823C18.8773 13.6419 20.7009 11.9149 22.1532 9.8931L22.6093 9.25816C22.7972 8.99669 22.7972 8.64451 22.6093 8.38303L22.1532 7.7481C20.7009 5.72634 18.8773 3.99925 16.7796 2.65889C16.1402 2.25031 15.2963 2.67338 15.2412 3.43019L15.1733 4.36083C15.1335 4.90656 15.1011 5.45269 15.0759 5.99907L14.0577 5.99907C10.393 5.99907 7.39774 8.92317 7.30965 12.5868L7.25042 15.0507ZM15.133 9.74232C12.7137 9.3782 10.3174 10.3522 8.83314 12.2306C9.09475 9.56748 11.3395 7.49907 14.0577 7.49907L15.7964 7.49907C16.2006 7.49907 16.5322 7.17871 16.546 6.77471C16.5723 6.00591 16.6134 5.23749 16.6694 4.46989L16.6748 4.39543C18.3182 5.55709 19.7585 6.98548 20.935 8.62323L21.0767 8.8206L20.935 9.01797C19.7585 10.6557 18.3182 12.0841 16.6748 13.2458L16.6694 13.1713C16.6064 12.3074 16.5622 11.4425 16.5368 10.5772C16.5261 10.2146 16.2575 9.91156 15.8987 9.85757L15.133 9.74232Z"
                  fill="white"
                />
                <path
                  d="M19.6415 17.4113C19.7595 16.403 19.8427 15.3916 19.8913 14.379C19.8965 14.2694 19.9462 14.1667 20.0285 14.0941C20.3919 13.7733 20.744 13.44 21.0841 13.0948C21.212 12.9649 21.4356 13.0557 21.4317 13.238C21.4005 14.6899 21.3004 16.1407 21.1314 17.5855C20.8948 19.6081 19.2705 21.1931 17.2584 21.418C13.7919 21.8054 10.2085 21.8054 6.74195 21.418C4.7299 21.1931 3.10556 19.6081 2.86901 17.5855C2.45447 14.0412 2.45447 10.4607 2.86901 6.9164C3.10556 4.89387 4.7299 3.30886 6.74195 3.08399C9.03293 2.82794 11.3749 2.7411 13.7005 2.82349C13.8963 2.83042 14.0311 3.0221 14.0066 3.2165C14.0016 3.25698 13.9975 3.29793 13.9945 3.33932L13.9432 4.04314C13.9314 4.20473 13.7935 4.32767 13.6316 4.32199C11.3845 4.24315 9.12136 4.32739 6.90856 4.5747C5.57846 4.72336 4.51297 5.77298 4.35885 7.09065C3.95786 10.5192 3.95786 13.9828 4.35885 17.4113C4.51297 18.729 5.57845 19.7786 6.90856 19.9272C10.2644 20.3023 13.736 20.3023 17.0918 19.9272C18.4219 19.7786 19.4874 18.729 19.6415 17.4113Z"
                  fill="white"
                />
              </svg>
            </div>
          </div> */}
          <div className={styles.notification}>
            <svg
              width="16"
              height="20"
              viewBox="0 0 16 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M8.58319 1C8.58319 0.447715 8.13548 0 7.58319 0C7.03091 0 6.58319 0.447715 6.58319 1V1.75H6.02577C3.8007 1.75 1.9591 3.48001 1.82021 5.70074L1.5992 9.2342C1.51494 10.5814 1.06266 11.8797 0.291595 12.9876C-0.405087 13.9886 0.215133 15.3712 1.42606 15.5165L4.83319 15.9254V17C4.83319 18.5188 6.06441 19.75 7.58319 19.75C9.10197 19.75 10.3332 18.5188 10.3332 17V15.9254L13.7403 15.5165C14.9512 15.3712 15.5715 13.9886 14.8748 12.9876C14.1037 11.8797 13.6514 10.5814 13.5672 9.2342L13.3462 5.70074C13.2073 3.48001 11.3657 1.75 9.1406 1.75H8.58319V1ZM6.02577 3.25C4.59277 3.25 3.40673 4.36417 3.31728 5.79438L3.09628 9.32784C2.99488 10.949 2.45063 12.5112 1.52278 13.8444C1.47243 13.9168 1.51725 14.0167 1.60478 14.0272L5.34244 14.4757C6.83093 14.6543 8.33544 14.6543 9.82393 14.4757L13.5616 14.0272C13.6491 14.0167 13.6939 13.9168 13.6436 13.8444C12.7157 12.5112 12.1715 10.949 12.0701 9.32784L11.8491 5.79438C11.7596 4.36417 10.5736 3.25 9.1406 3.25H6.02577ZM7.58319 18.25C6.89283 18.25 6.33319 17.6904 6.33319 17V16.25H8.83319V17C8.83319 17.6904 8.27355 18.25 7.58319 18.25Z"
                fill="#363352"
                fillOpacity="0.37"
              />
            </svg>
          </div>
          <div className={styles.profile}>
            <div className={styles.photo}>{/* <img src="" alt="" /> */}</div>
            <h2>Junaid</h2>
            <svg
              width="12"
              height="8"
              viewBox="0 0 12 8"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1 1L5.50292 6L10.0058 1"
                stroke="#979797"
                strokeWidth="2"
                strokeLinecap="round"
              />
            </svg>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TopNav;
